<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>猛健樂 Mounjaro 格數換算器</title>
<style>
  body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
       padding:18px;max-width:500px;margin:0 auto;color:#111;background:#f9fafc}
  h1{font-size:1.5rem;margin-bottom:10px;text-align:center}
  .card{border:1px solid #e0e0e0;padding:16px;border-radius:10px;
        box-shadow:0 4px 16px rgba(0,0,0,0.05);background:#fff}
  label{display:block;margin-top:10px;font-size:0.95rem}
  input, select{width:100%;padding:8px;border-radius:6px;border:1px solid #ccc;margin-top:6px}
  button{margin-top:14px;width:100%;padding:10px;border-radius:8px;border:0;
         background:#0b76ff;color:white;font-size:1rem;cursor:pointer}
  .result{margin-top:14px;padding:14px;border-radius:8px;background:#f2f7ff;
          border:1px solid #d8e6ff;text-align:center}
  .highlight {color: #d63384; font-weight: bold;} /* 增加一點顏色強調重點 */
</style>
</head>
<body>
  <h1>猛健樂格數換算</h1>

  <div class="card">
    <label>選擇筆型劑量 (每支總容量 4 劑 × 60 格 / 共 2.4 cc)</label>
    <select id="preset">
      <option value="2.5">2.5 mg</option>
      <option value="5">5 mg</option>
      <option value="7.5">7.5 mg</option>
      <option value="10">10 mg</option>
    </select>

    <label>輸入目標劑量 (mg)</label>
    <input id="targetMg" type="number" step="any" placeholder="例如 2 mg">

    <button id="calcBtn">計算</button>

    <div id="out" class="result" style="display:none"></div>
  </div>

<script>
  const presets = {
    // penMg: 整支筆的總藥量 (mg)
    // penClicks: 整支筆的總格數
    // penVol: 整支筆的總容量 (cc/ml) -> 官方規格通常為 2.4ml
    "2.5": { penMg: 10, penClicks: 240, penVol: 2.4 },
    "5":   { penMg: 20, penClicks: 240, penVol: 2.4 },
    "7.5": { penMg: 30, penClicks: 240, penVol: 2.4 },
    "10":  { penMg: 40, penClicks: 240, penVol: 2.4 }
  };

  document.getElementById('calcBtn').addEventListener('click', ()=>{
    const key = document.getElementById('preset').value;
    const targetMg = parseFloat(document.getElementById('targetMg').value);
    const outEl = document.getElementById('out');

    if(isNaN(targetMg) || targetMg <= 0){
      outEl.style.display='block';
      outEl.innerHTML='<span style="color:#a33">請輸入有效的劑量 (mg)。</span>';
      return;
    }

    const { penMg, penClicks, penVol } = presets[key];
    
    // 計算每 mg 對應多少格
    const clicksPerMg = penClicks / penMg;
    
    // 計算目標劑量需要的格數
    const needClicks = targetMg * clicksPerMg;
    
    // 計算施打體積 (cc)
    // 公式：目標格數 * (總容量 / 總格數)
    // 或是：(目標mg / 總mg) * 總容量
    const volPerClick = penVol / penClicks; // 通常是 0.01 cc
    const needVol = needClicks * volPerClick;

    // 計算這支筆還能打幾次 (以整支筆計算)
    const doses = Math.floor(penClicks / needClicks);
    const remainingClicks = penClicks - doses * needClicks;

    let html = `<strong>${key} mg 筆</strong><br>`;
    html += `每 mg 約 <strong>${clicksPerMg.toFixed(2)}</strong> 格<br>`;
    
    html += `<hr style="margin:10px 0; border:0; border-top:1px dashed #ccc;">`;
    
    html += `<div style="font-size:1.1em; margin-bottom:4px;">目標：${targetMg} mg</div>`;
    html += `<div>需轉動：<span class="highlight">${Math.round(needClicks)}</span> 格</div>`;
    html += `<div>注射體積：<span class="highlight">${needVol.toFixed(2)}</span> cc</div>`;
    
    html += `<hr style="margin:10px 0; border:0; border-top:1px dashed #ccc;">`;
    
    html += `<div style="font-size:0.9rem; color:#666;">此筆約可施打 <strong>${doses}</strong> 次</div>`;
    // 若有剩餘格數才顯示
    if(remainingClicks > 0) {
        html += `<div style="font-size:0.9rem; color:#666;">(餘約 ${Math.round(remainingClicks)} 格)</div>`;
    }

    outEl.style.display='block';
    outEl.innerHTML = html;
  });
</script>
</body>
</html>

