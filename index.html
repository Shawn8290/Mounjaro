<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>猛健樂 Mounjaro 格數換算器</title>
<style>
  body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
       padding:18px;max-width:500px;margin:0 auto;color:#111;background:#f9fafc}
  h1{font-size:1.5rem;margin-bottom:10px;text-align:center}
  .card{border:1px solid #e0e0e0;padding:16px;border-radius:10px;
        box-shadow:0 4px 16px rgba(0,0,0,0.05);background:#fff}
  label{display:block;margin-top:10px;font-size:0.95rem}
  input, select{width:100%;padding:8px;border-radius:6px;border:1px solid #ccc;margin-top:6px}
  button{margin-top:14px;width:100%;padding:10px;border-radius:8px;border:0;
         background:#0b76ff;color:white;font-size:1rem;cursor:pointer}
  .result{margin-top:14px;padding:14px;border-radius:8px;background:#f2f7ff;
          border:1px solid #d8e6ff;text-align:center}
</style>
</head>
<body>
  <h1>猛健樂格數換算</h1>

  <div class="card">
    <label>選擇筆型劑量</label>
    <select id="preset">
      <option value="2.5">2.5 mg 筆（4 劑 × 60 格，共 240 格）</option>
      <option value="5">5 mg 筆（4 劑 × 60 格，共 240 格）</option>
      <option value="7.5">7.5 mg 筆（4 劑 × 60 格，共 240 格）</option>
      <option value="10">10 mg 筆（4 劑 × 60 格，共 240 格）</option>
    </select>

    <label>輸入目標劑量 (mg)</label>
    <input id="targetMg" type="number" step="any" placeholder="例如 2 mg">

    <button id="calcBtn">計算</button>

    <div id="out" class="result" style="display:none"></div>
  </div>

<script>
  const presets = {
    "2.5": { penMg: 10, penClicks: 240 },
    "5":   { penMg: 20, penClicks: 240 },
    "7.5": { penMg: 30, penClicks: 240 },
    "10":  { penMg: 40, penClicks: 240 }
  };

  document.getElementById('calcBtn').addEventListener('click', ()=>{
    const key = document.getElementById('preset').value;
    const targetMg = parseFloat(document.getElementById('targetMg').value);
    const outEl = document.getElementById('out');

    if(isNaN(targetMg) || targetMg <= 0){
      outEl.style.display='block';
      outEl.innerHTML='<span style="color:#a33">請輸入有效的劑量 (mg)。</span>';
      return;
    }

    const { penMg, penClicks } = presets[key];
    const clicksPerMg = penClicks / penMg;
    const needClicks = targetMg * clicksPerMg;
    const doses = Math.floor(penClicks / needClicks);
    const remainingClicks = penClicks - doses * needClicks;

    let html = `<strong>${key} mg 筆</strong><br>`;
    html += `每 mg 約 <strong>${clicksPerMg.toFixed(2)}</strong> 格<br>`;
    html += `<div style="margin-top:6px;">${targetMg} mg 約需 <strong>${Math.round(needClicks)}</strong> 格</div>`;
    html += `<div style="margin-top:6px;">此筆約可施打 <strong>${doses}</strong> 次</div>`;
    html += `<div style="margin-top:6px;">剩餘格數：約 <strong>${Math.round(remainingClicks)}</strong> 格</div>`;

    outEl.style.display='block';
    outEl.innerHTML = html;
  });
</script>
</body>
</html>
